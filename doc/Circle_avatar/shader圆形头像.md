# æ•ˆæœæ¼”ç¤º

åœ†å½¢å¤´åƒåœ¨creatorä¸­æ²¡æœ‰æä¾›ï¼Œä½†æ˜¯è¿™ä¸ªåˆæ˜¯ä¸ªæ¯”è¾ƒé«˜é¢‘çš„ä½¿ç”¨åŠŸèƒ½ã€‚

![demo](./resources/demo.png)

# å®ç°æ€è·¯

å¯ä»¥ä½¿ç”¨ä¸€å¼ åœ†çš„å›¾ç‰‡ï¼Œç„¶åé…åˆmaskçš„åå‘é®ç½©æ¥å®ç°ï¼Œä½†æ˜¯è¿™ç§å®ç°çš„æ•ˆæœä¼šæœ‰é”¯é½¿ï¼Œæ‰€ä»¥ä¸€èˆ¬ä¼šå†™ä¸€ä¸ªshaderã€‚å¼‚åä¸Šç¯‡æ–‡ç« ä¸­è¿½å…‰æ•ˆæœä¸­é‚£ä¸ªshaderåˆšå¥½ç›´æ¥å°±å¯ä»¥ä½¿ç”¨äº†ï¼Œè¿™ç³»åˆ—çš„å®šä½æ˜¯å¸¸ç”¨åŠŸèƒ½é›†é”¦ï¼Œåœ†å½¢å¤´åƒåˆæ˜¯é«˜é¢‘åº”ç”¨ï¼Œå› æ­¤å¼‚åå°±å†å•ç‹¬æ‹¿å‡ºæ¥å†æ°´ä¸€ç¯‡ï¼Œæ–¹é¢åé¢æŸ¥çœ‹ä½¿ç”¨ã€‚

å…‰åœˆæ˜¯ä¸€ä¸ªåœ†ï¼Œå‡è®¾åœ†å¿ƒåœ¨çº¹ç†çš„ä¸­é—´ï¼Œå®ƒçš„åæ ‡æ˜¯`vec2(0.5,0.5)`ï¼Œæˆ‘ä»¬åªéœ€è®©åˆ°åœ†å¿ƒçš„è·ç¦»å¤§äºåŠå¾„çš„åƒç´ ä¸¢å¼ƒæˆ–è€…é€æ˜åº¦ä¸º0ï¼Œä»£ç å¦‚ä¸‹ï¼š

```c++
void main () {
  vec4 color = vec4(1, 1, 1, 1);
  color *= texture(texture, v_uv0);
  color *= v_color;

  color.a = step(length(v_uv0 - vec2(0.5,0.5)), 0.1);
  gl_FragColor = color;
}
```

![ellipse](./resources/ellipse.png)

å…¶ä¸­`step` æ˜¯å†…ç½®çš„è§„æ•´å‡½æ•° `step(a, x) = x >= a? 1 : 0`ï¼Œ`length`æ˜¯å–æ¨¡ã€‚ä¸Šé¢çš„ä»£ç æ®µåº”ç”¨åœ¨å¯ä»¥åœ¨æ­£æ–¹å½¢çš„çº¹ç†ä¸­å¯ä»¥å¾—å‡ºä¸€ä¸ªæ­£åœ†ï¼Œä½†æ˜¯å¦‚æœçº¹ç†ä¸æ˜¯æ­£æ–¹å½¢ï¼Œä¸Šé¢å‡ºæ¥çš„æ•ˆæœä¼šæ˜¯ä¸€ä¸ªæ¤­åœ†ï¼Œå› ä¸ºåœ¨shaderæ— è®ºçº¹ç†çš„çœŸå®å®½é«˜æ˜¯å¤šå°‘ï¼Œå®ƒçš„`x,y`å˜åŒ–èŒƒå›´éƒ½æ˜¯0~1ï¼Œæ˜¯æ¯”ä¾‹çš„å˜åŒ–ã€‚å¦‚æœéœ€è¦äº§ç”Ÿä¸€ä¸ªæ­£åœ†ï¼Œè¿˜æ˜¯å¾—é€šè¿‡è·å–çº¹ç†çš„çœŸå®å®½é«˜ï¼Œæ¥è®¡ç®—çœŸå®çš„å®½é«˜æ¯”ä¾‹ï¼Œå¼‚åé€‰æ‹©çš„æ–¹å¼æ˜¯åœ¨åœ¨ç»„ä»¶åˆå§‹åŒ–çš„æ—¶å€™ï¼Œè¾“å…¥ä¸€ä¸ª`wh_ratio`æ¯”ä¾‹æ¥è·å–ï¼Œåœ†çš„çœŸå®åŠå¾„é€šè¿‡å‹¾è‚¡å®šç†æ¥è®¡ç®—ï¼Œå¼‚åè¿™é‡Œå°±æ²¡æœ‰å¼€æ–¹äº†ï¼Œç›´æ¥é€šè¿‡åŠå¾„å¹³æ–¹çš„æ¯”è¾ƒæ¥èˆå»åœ†å¤–çš„ç‚¹ã€‚

```c++
void main () {
  vec4 o = vec4(1, 1, 1, 1);
  o *= texture(texture, v_uv0);
  o *= v_color;

  float circle = radius * radius;
  float rx = center.x * wh_ratio;
  float ry = center.y;
  float dis = (v_uv0.x * wh_ratio - rx) * (v_uv0.x * wh_ratio - rx) + (v_uv0.y  - ry) * (v_uv0.y - ry);

  o.a = step(dis, 0.1);
  gl_FragColor = o;
}
```

è¿™æ ·å­å°±èƒ½åœ¨ä¸€ä¸ªä¸åŒå®½é«˜æ¯”çš„çº¹ç†ä¸­éƒ½èƒ½å¤Ÿç”»å‡ºä¸€ä¸ªæ­£åœ†ã€‚

![circle](./resources/circle.png)

ä½†æ˜¯è¿™æ ·çš„åœ†çš„è¾¹ç¼˜æ˜¯æœ‰é”¯é½¿çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦å€ŸåŠ©å¦å¤–ä¸€ä¸ªå†…ç½®æ’å€¼å‡½æ•°`smoothstep(min, max, x)`ï¼Œå®ƒèƒ½å¤Ÿè¿”å›ä¸€ä¸ªåœ¨è¾“å…¥å€¼ä¹‹é—´å¹³ç¨³å˜åŒ–çš„æ’å€¼ï¼Œä»¥æ­¤æ¥è¾¾åˆ°è¾¹ç¼˜ç¾½åŒ–çš„æ•ˆæœã€‚

```c++
void main () {
  vec4 o = vec4(1, 1, 1, 1);
  o *= texture(texture, v_uv0);
  o *= v_color;

  float circle = radius * radius;
  float rx = center.x * wh_ratio;
  float ry = center.y;
  float dis = (v_uv0.x * wh_ratio - rx) * (v_uv0.x * wh_ratio - rx) + (v_uv0.y  - ry) * (v_uv0.y - ry);

  o.a = smoothstep(circle, circle - blur, dis);
  gl_FragColor = o;
}
```

![circle](./resources/demo.png)

## æ•ˆæœé¢„è§ˆ

æºç è·å–è¯·ç‚¹å‡»**æŸ¥çœ‹åŸæ–‡**ï¼Œé•¿æŒ‰äºŒç»´ç æŸ¥çœ‹æ•ˆæœğŸ‘‡

![ewm](./resources/preview_ewm.png)
